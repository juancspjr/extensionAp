<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WebScraping Intelligence Suite v3.2.2</title>
  <style>
    body { 
      width: 540px; 
      padding: 15px; 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      margin: 0;
    }
    
    .header { 
      color: white; 
      text-align: center; 
      margin-bottom: 15px; 
      background: rgba(255,255,255,0.15); 
      padding: 15px; 
      border-radius: 12px; 
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255,255,255,0.2);
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
    }
    
    .version-badge {
      background: linear-gradient(45deg, #00ff88, #00d4ff);
      color: #000;
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 11px;
      font-weight: bold;
      margin-left: 8px;
      box-shadow: 0 2px 8px rgba(0,255,136,0.3);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    .button { 
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white; 
      border: none; 
      padding: 14px 16px; 
      border-radius: 10px; 
      width: 100%; 
      margin: 6px 0; 
      cursor: pointer; 
      font-size: 15px; 
      font-weight: bold; 
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      position: relative;
      overflow: hidden;
    }
    
    .button:hover { 
      transform: translateY(-2px); 
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    }

    .button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .button.primary { 
      background: linear-gradient(45deg, #ff6b35, #f7931e);
      font-size: 17px;
      padding: 16px 18px;
    }
    
    .button.connection {
      background: linear-gradient(45deg, #00ff88, #00d4ff);
      color: #000;
      font-weight: bold;
    }
    
    .button.connection.active {
      background: linear-gradient(45deg, #ff4757, #ff3742);
      color: white;
      animation: pulse 2s infinite;
    }
    
    .button.download { 
      background: linear-gradient(45deg, #17a2b8, #20c997);
      display: none;
    }
    
    .status { 
      padding: 12px 16px; 
      margin: 10px 0; 
      border-radius: 10px; 
      font-size: 13px; 
      font-weight: 600;
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .connection-status {
      padding: 10px 14px; 
      margin: 8px 0; 
      border-radius: 8px; 
      font-size: 12px; 
      font-weight: 600;
      background: rgba(255,255,255,0.9);
      border-left: 4px solid #6c757d;
    }
    
    .connection-status.active {
      background: rgba(0, 255, 136, 0.15);
      border-left: 4px solid #00ff88;
      color: #00aa55;
    }
    
    .connection-status.inactive {
      background: rgba(255,255,255,0.9);
      border-left: 4px solid #6c757d;
      color: #495057;
    }
    
    .success { color: #155724; border-left: 4px solid #28a745; }
    .error { color: #721c24; border-left: 4px solid #dc3545; }
    .warning { color: #856404; border-left: 4px solid #ffc107; }
    .info { color: #0c5460; border-left: 4px solid #17a2b8; }
    
    .diagnostics { 
      background: rgba(255,255,255,0.98); 
      border-radius: 12px; 
      padding: 16px; 
      margin: 12px 0; 
      max-height: 400px; 
      overflow-y: auto; 
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
    }
    
    .metric-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      margin: 4px 0;
      background: rgba(102, 126, 234, 0.1);
      border-radius: 8px;
      font-size: 12px;
    }
    
    .metric-label {
      font-weight: 600;
      color: #495057;
    }
    
    .metric-value {
      font-weight: bold;
      color: #343a40;
    }
    
    .confidence-bar {
      width: 100%;
      height: 10px;
      background: rgba(0,0,0,0.1);
      border-radius: 5px;
      overflow: hidden;
      margin: 8px 0;
    }
    
    .confidence-fill {
      height: 100%;
      background: linear-gradient(90deg, #ff6b35, #28a745);
      transition: width 0.8s ease;
      border-radius: 5px;
    }
    
    .ai-status {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin: 8px 0;
    }
    
    .ai-badge {
      padding: 4px 10px;
      border-radius: 15px;
      font-size: 11px;
      font-weight: bold;
      color: white;
    }
    
    .deepseek-badge { background: linear-gradient(45deg, #667eea, #764ba2); }
    .gemini-badge { background: linear-gradient(45deg, #4285f4, #34a853); }
    .perplexity-badge { background: linear-gradient(45deg, #FF6B6B, #4ECDC4); }
    
    .improvement-info {
      font-size: 11px;
      color: rgba(255,255,255,0.9);
      margin-top: 12px;
      padding: 12px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      line-height: 1.5;
      border: 1px solid rgba(255,255,255,0.2);
    }
    
    .highlight {
      background: rgba(255,255,255,0.2);
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="header">
    <h2>üß† WebScraping Intelligence Suite</h2>
    <p style="margin:5px 0; font-size: 15px;">
      Multi-Agent + Connection Monitor v3.2.2<span class="version-badge">FIXED</span>
    </p>
    <p style="margin:0; font-size: 13px; opacity: 0.95;">
      üîß Parser Corregido ‚Ä¢ üì° Monitor de Conexiones ‚Ä¢ ‚ö° Dual AI
    </p>
  </div>
  
  <button id="connectionBtn" class="button connection">üü¢ Iniciar Monitor</button>
  <div id="connectionStatus" class="connection-status inactive">
    üì° Monitor de conexiones inactivo - Captura APIs y patrones de red
  </div>
  
  <button id="analyzeBtn" class="button primary">üöÄ Ejecutar An√°lisis Multi-Agente v3.2.2</button>
  <button id="downloadBtn" class="button download">üìÑ Descargar Reporte Profesional</button>
  
  <div id="status" class="status info">
    ‚úÖ Sistema Multi-Agente v3.2.2 listo - Parser corregido + Monitor de conexiones
  </div>
  
  <div id="analysisResults" class="diagnostics">
    <p style="color: #666; text-align: center; margin: 25px 0;">
      üì° <strong>WORKFLOW RECOMENDADO:</strong><br>
      1. üü¢ <span class="highlight">Iniciar Monitor</span> de Conexiones<br>
      2. üëÜ <span class="highlight">Interactuar</span> con la p√°gina (enviar texto, im√°genes, etc.)<br>
      3. üî¥ <span class="highlight">Parar Monitor</span> (auto-ejecuta an√°lisis)<br>
      4. üìä <span class="highlight">Revisar reporte</span> t√©cnico con conexiones<br>
      <small style="color: #999;">Sistema profesional con an√°lisis de conexiones en tiempo real v3.2.2</small>
    </p>
  </div>
  
  <div class="improvement-info">
    <strong>üéØ Correcciones v3.2.2:</strong><br>
    ‚Ä¢ üîß <span class="highlight">Parser Definitivo:</span> Errores sint√°cticos corregidos completamente<br>
    ‚Ä¢ üì° <span class="highlight">Connection Monitor:</span> Captura APIs y requests en tiempo real<br>
    ‚Ä¢ üåê <span class="highlight">Network Analysis:</span> Ingenier√≠a inversa de arquitectura web<br>
    ‚Ä¢ üß† <span class="highlight">Enhanced AI:</span> DeepSeek + Gemini Pro/Flash con fallbacks<br>
    ‚Ä¢ üìÑ <span class="highlight">Technical Report:</span> Documentaci√≥n exhaustiva con patrones<br>
    ‚Ä¢ ‚ö° <span class="highlight">Real-time Capture:</span> Detecci√≥n autom√°tica de endpoints<br>
    ‚Ä¢ üõ°Ô∏è <span class="highlight">Auto Recovery:</span> Recuperaci√≥n autom√°tica de respuestas malformadas
  </div>
  
  <script src="popup.js"></script>
</body>
</html>